Sujet:	programmation
Lien:	https://openclassrooms.com/fr/courses/2035766-optimisez-votre-deploiement-en-creant-des-conteneurs-avec-docker/7539436-tirez-un-maximum-de-ce-cours
Auteur:	o
Autlink:	o
Date:	2024/03

============ Présentation ============

https://openclassrooms.com/fr/courses/2035766-optimisez-votre-deploiement-en-creant-des-conteneurs-avec-docker/6211306-decouvrez-les-conteneurs
https://hub.docker.com/

************ Généralités ************

Docker est une plate-forme de conteneurs. C'est un github pour tout un environnement entier.
L'ancêtre est la machine virtuelle, ou vm. La vm est complètement isolée de l'ordinateur hôte, elle est la seule à utiliser les ressources (la ram) qui lui sont allouées. Elle permet d'installer n'importe quel os. Elle est lente à démarrer. Si elle n'utilise qu'une portion des ressouces allouées, personne d'autre ne peut les utiliser. On parle de virtualisation lourde.
Un conteneur se contente d'isoler l'appli et ses dépendances, en partageant les ressources de l'hôte.
Un conteneur permet d'unifier les environnements de travail entre équipe. Un même environnement peut être copié chez les développeur, les testeurs, la prod...
Processus stateful: Mon travail modifie l'état de l'appli, qui est conservé quand je l'éteind et la rallume. Bdd.
Processus stateless: L'appli est rebootée à chaque fermeture. Je reparts de zéro à chaque fois. Requête.

************ Fonctionnement de docker ************

Docker est stateless par défaut. Attention à comment stoquer les bdd.
Il ne permet de stoquer que des environnements linux.
Un conteneur par appli. Pour utiliser wamp, j'ai un conteneur pour appache, un pour php, un pour mysql...

============ Mon premier conteneur ============

Dans ma console: Docker run hello-world
Docker cherche si j'ai une image hello-world en local ou sur le registory docker distant.
Docker run -d -p 8080:80 nginx
Docker créé un serveur (nginx) au port (-p) 8080. 80 est le port propre du conteneur.
Localhost:8080
Run xxx: Ouvrir un conteneur puis le fermer, comme un script.
Run xxx -d: Ouvrir un conteneur puis le laisser ouver, comme un serveur. La console semble avoire fermé docker, mais ce n'est pas le cas.
Run xxx --detach: Idem
Exec -it id_retourné_lors_du_docker_run bash: Entrer dans mon conteneur
Id est le long code sur la dernière ligne du run. Exit permet de sortir du conteneur
Stop id_retourné_lors_du_docker_run: Arrêter mon conteneur

************ Exemple, la puissance de cat ************

Docker exec -it c8df3f2730471a34d81c6c9800f5bfe7b275553738a7dde9180293a65cb50f4b bash
cd /usr/share/nginx/html
Cat index.html affiche le contenu du fichier
Cat index.html > copie.html
Remplacer le texte de mon fichier
Cat << fin >> index.html
<p>coucou !</p>
<p>je suis un texte</p>
Fin
Exit
Docker stop c8df3f2730471a34d81c6c9800f5bfe7b275553738a7dde9180293a65cb50f4b

https://openclassrooms.com/fr/courses/2035766-optimisez-votre-deploiement-en-creant-des-conteneurs-avec-docker/6211458-lancez-votre-premier-conteneur-en-local